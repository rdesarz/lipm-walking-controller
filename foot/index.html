
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../preview_control/">
      
      
        <link rel="next" href="../inverse_kinematics/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Foot trajectory generation - Biped Walking Controller</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue-grey" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#foot-trajectory-generation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Biped Walking Controller" class="md-header__button md-logo" aria-label="Biped Walking Controller" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Biped Walking Controller
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Foot trajectory generation
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/rdesarz/biped-walking-controller.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Biped Walking Controller" class="md-nav__button md-logo" aria-label="Biped Walking Controller" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Biped Walking Controller
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/rdesarz/biped-walking-controller.git" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../preview_control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Zero-Moment Point (ZMP) Preview Controller
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Foot trajectory generation
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Foot trajectory generation
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#swing-foot-trajectory-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swing foot trajectory generation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../inverse_kinematics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inverse kinematics
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../simulation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Integration in simulation
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#swing-foot-trajectory-generation" class="md-nav__link">
    <span class="md-ellipsis">
      
        Swing foot trajectory generation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="foot-trajectory-generation">Foot trajectory generation</h1>
<h2 id="swing-foot-trajectory-generation">Swing foot trajectory generation</h2>
<p>Walking is organized into fixed-duration phases: <strong>Single Support (SS)</strong> and <strong>Double Support (DS)</strong>. In Single Support, one foot is the 
<strong>swing foot</strong> and the other is the <strong>stance foot</strong>. In Double Support both feet are in contact and no swing foot exists. The timing of each 
phase is related to the trajectory of the ZMP. During Single Support phase, the ZMP position is maintained over the stance
foot. During Double Support phase, the ZMP position moves from a foot to another.
Currently, there are two approaches can be used to generate the swing foot trajectory:
* The first one is to follow a sinusoidal time law along the world x-axis from <span class="arithmatex">\(x_0\)</span> to <span class="arithmatex">\(x_1\)</span> 
over duration <span class="arithmatex">\(T_{SS}\)</span>. 
* The second, default option uses a minimum-jerk Bézier curve whose velocity and acceleration are aligned with the ground normal. This ensures smooth foot motion. The curve parameters are set so that its peak reaches the desired maximum height. </p>
<p>The foot orientation is kept constant with yaw=0; 
the sole remains parallel to the floor. All phase durations are configurable.</p>
<p>The figure below shows the generated trajectory for both foot with a height of 20cm:</p>
<p align="center">
  <img src="../img/feet_traj.png" alt="desc" width="460">
</p>

<h2 id="example">Example</h2>
<p>You can reproduce the example displayed on the figure by launching the script <code>example_2_feet_motion.py</code>. We 
recommend you to use Docker as explained in the installation part:</p>
<div class="highlight"><pre><span></span><code>xhost<span class="w"> </span>+local:root
docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span>-it<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--env<span class="w"> </span>DISPLAY<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v<span class="w"> </span>/tmp/.X11-unix:/tmp/.X11-unix:ro<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--device<span class="w"> </span>/dev/dri:/dev/dri<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>ghcr.io/rdesarz/biped-walking-controller<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>python<span class="w"> </span>examples/example_2_feet_motion.py<span class="w"> </span>
</code></pre></div>
<p>The parameters used in this script are the following:</p>
<div class="highlight"><pre><span></span><code><span class="n">dt</span> <span class="o">=</span> <span class="mf">0.005</span>  <span class="c1"># Delta of time of the model simulation</span>
<span class="n">t_ss</span> <span class="o">=</span> <span class="mf">0.7</span>  <span class="c1"># Single support phase time window</span>
<span class="n">t_ds</span> <span class="o">=</span> <span class="mf">0.8</span>  <span class="c1"># Double support phase time window</span>
<span class="n">t_init</span> <span class="o">=</span> <span class="mf">2.0</span>  <span class="c1"># Initialization phase (transition from still position to first step)</span>
<span class="n">t_end</span> <span class="o">=</span> <span class="mf">2.0</span> <span class="c1"># Final phase (transition from walking to standstill position)</span>
<span class="n">lf_initial_pose</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="c1"># Initial position of the left foot</span>
<span class="n">rf_initial_pose</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">])</span> <span class="c1"># Initial position of the right foot</span>
<span class="n">n_steps</span> <span class="o">=</span> <span class="mi">5</span> <span class="c1"># Number of steps</span>
<span class="n">l_stride</span> <span class="o">=</span> <span class="mf">0.3</span> <span class="c1"># Length of the stride</span>
<span class="n">max_height_foot</span> <span class="o">=</span> <span class="mf">0.2</span> <span class="c1"># Maximal height of the foot during motion of the swing foot</span>
</code></pre></div>
<h1 id="code-api">Code API</h1>


<div class="doc doc-object doc-module">



<a id="biped_walking_controller.foot"></a>
    <div class="doc doc-contents first">

        <p>Footstep geometry and trajectories utilities.</p>
<p>Provides:</p>
<ul>
<li>Polygon operations to compute single/double-support regions.</li>
<li>ZMP clamp to the current support polygon.</li>
<li>Deterministic swing-foot trajectories and step poses.</li>
</ul>










  <div class="doc doc-children">









<div class="doc doc-object doc-class">



<h2 id="biped_walking_controller.foot.BezierCurveFootPathGenerator" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">BezierCurveFootPathGenerator</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">BezierCurveFootPathGenerator</span><span class="p">(</span><span class="n">foot_height</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Swing-foot path generator using a quintic Bézier with zero vel/acc at endpoints.</p>
<p>This generator fixes the first three control points at the start pose and
the last three at the end pose, then sets the vertical components of the
interior points to reach a prescribed apex height. The vertical “shape”
parameter <code>alpha</code> is searched once at construction, then reused per call.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>foot_height</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Desired apex height of the swing foot above the line segment connecting
start and end poses.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Attributes:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="biped_walking_controller.foot.BezierCurveFootPathGenerator.alpha">alpha</span></code></td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Internal vertical shaping parameter calibrated so that the curve height
at <code>s=0.5</code> equals <code>foot_height</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>The constructor performs a simple grid search over <code>alpha</code> in
  <code>[0, 2*foot_height]</code> to match the apex within <code>1e-3</code>.</li>
<li>Endpoints have zero velocity and acceleration due to repeated control
  points: <code>P0=P1=P2</code> and <code>P3=P4=P5</code>.</li>
</ul>
</details>










  <div class="doc doc-children">












  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="biped_walking_controller.foot.SinusoidFootPathGenerator" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">SinusoidFootPathGenerator</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">SinusoidFootPathGenerator</span><span class="p">(</span><span class="n">foot_height</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">



        <p>Swing-foot path generator with sinusoidal vertical profile.</p>
<p>The horizontal motion is linear from start to end along x, with y held
constant at the start value. The vertical component follows:
    z(s) = foot_height * sin(pi * s)</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>foot_height</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum height at mid-swing.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>This profile is C1 at the endpoints (zero velocity) but not C2 like the
Bézier construction. Use the Bézier for smoother contact transitions.</p>
</details>










  <div class="doc doc-children">












  </div>

    </div>

</div>


<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.bezier_quintic" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">bezier_quintic</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">bezier_quintic</span><span class="p">(</span><span class="n">P</span><span class="p">,</span> <span class="n">s</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Evaluate a quintic (degree-5) Bézier curve at parameter values <code>s</code>.</p>
<p>A quintic Bézier curve is:
    B(s) = Σ_{i=0..5} C(5,i) (1-s)^{5-i} s^i P_i</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>P</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Control points of shape <code>(6, 3)</code>. Rows are <code>P0..P5</code>.
Columns are Cartesian coordinates <code>[x, y, z]</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>s</code>
            </td>
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>1D array of parameter values in <code>[0, 1]</code> of shape <code>(N,)</code>.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="numpy.ndarray">ndarray</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Curve samples of shape <code>(N, 3)</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>With <code>P0=P1=P2</code> and <code>P3=P4=P5</code>, the curve has zero velocity and
acceleration at both ends, which is the typical “minimum-jerk” boundary
condition used for swing-foot profiles.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.compute_feet_trajectories" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">compute_feet_trajectories</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">compute_feet_trajectories</span><span class="p">(</span><span class="n">rf_initial_pose</span><span class="p">,</span> <span class="n">lf_initial_pose</span><span class="p">,</span> <span class="n">n_steps</span><span class="p">,</span> <span class="n">steps_pose</span><span class="p">,</span> <span class="n">t_ss</span><span class="p">,</span> <span class="n">t_ds</span><span class="p">,</span> <span class="n">t_init</span><span class="p">,</span> <span class="n">t_final</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">traj_generator</span><span class="o">=</span><span class="n">BezierCurveFootPathGenerator</span><span class="p">(</span><span class="n">foot_height</span><span class="o">=</span><span class="mf">0.1</span><span class="p">))</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Generate swing trajectories and step poses for alternating feet.</p>


<details class="scenario" open>
  <summary>Scenario</summary>
  <p>Start with a DS phase of duration <code>t_init</code> to shift CoM.
Then for <code>n_steps</code>, alternate SS (duration <code>t_ss</code>) and DS (duration <code>t_ds</code>)
with forward stride <code>l_stride</code>. Finish with one SS to align both feet,
then a final DS of duration <code>t_final</code> to center CoM.</p>
</details>

<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>rf_initial_pose</code>
            </td>
            <td>
                  <code>(<span title="array">array</span> - <span title="like">like</span>, <span title="shape">shape</span>(3))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial right foot pose proxy [x, y, z].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>lf_initial_pose</code>
            </td>
            <td>
                  <code>(<span title="array">array</span> - <span title="like">like</span>, <span title="shape">shape</span>(3))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial left foot pose proxy [x, y, z].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>n_steps</code>
            </td>
            <td>
                  <code><span title="int">int</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Number of forward steps.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>t_ss</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Single-support duration per step.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>t_ds</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Double-support duration between steps.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>t_init</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Initial DS duration before stepping.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>t_end</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Final DS duration to center the CoM.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>l_stride</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Step length along +x for each new foothold.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>dt</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time discretization step.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>max_height_foot</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Peak swing height for the swinging foot.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
<th>Name</th>          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
<td><code>t</code></td>            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(<span title="N">N</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Time samples.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>lf_path</code></td>            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(<span title="N">N</span>, 3))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Left foot trajectory [x, y, z].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>rf_path</code></td>            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(<span title="N">N</span>, 3))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Right foot trajectory [x, y, z].</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>steps_pose</code></td>            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(<span title="n_steps">n_steps</span> + 2, 2))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Planned foothold XY positions. Last row mirrors penultimate y to align feet.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
<td><code>phases</code></td>            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(<span title="N">N</span>))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Phase flag over time: -1 for left swing, +1 for right swing, 1 during right-stance,
-1 during left-stance, unchanged during DS.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>Swing z uses a half-sine profile with peak <code>max_height_foot</code>.</li>
<li>X is linearly interpolated during SS, then held constant until the next step.</li>
<li>Y remains fixed to the initial lateral offsets.</li>
</ul>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.clamp_to_polygon" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">clamp_to_polygon</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">clamp_to_polygon</span><span class="p">(</span><span class="n">pnt</span><span class="p">,</span> <span class="n">poly</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Project a 2D point to the closest location inside a polygon.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>pnt</code>
            </td>
            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(2))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Input point [x, y].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>poly</code>
            </td>
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Support polygon in world coordinates.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code>(<span title="ndarray">ndarray</span>, <span title="shape">shape</span>(2))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Point inside <code>poly</code>. Equals <code>pnt</code> if already inside.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <p>Uses the nearest point on the polygon exterior if outside.</p>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.compute_double_support_polygon" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">compute_double_support_polygon</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">compute_double_support_polygon</span><span class="p">(</span><span class="n">foot_pose_a</span><span class="p">,</span> <span class="n">foot_pose_b</span><span class="p">,</span> <span class="n">foot_shape</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compute the convex support region for double support.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>foot_pose_a</code>
            </td>
            <td>
                  <code>(<span title="array">array</span> - <span title="like">like</span>, <span title="shape">shape</span>(2) or (3,))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>World pose proxy for foot A: uses [x, y].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>foot_pose_b</code>
            </td>
            <td>
                  <code>(<span title="array">array</span> - <span title="like">like</span>, <span title="shape">shape</span>(2) or (3,))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>World pose proxy for foot B: uses [x, y].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>foot_shape</code>
            </td>
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Foot contact shape in the foot frame (centered).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Convex hull of the union of both translated foot polygons.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.compute_single_support_polygon" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">compute_single_support_polygon</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">compute_single_support_polygon</span><span class="p">(</span><span class="n">foot_pose</span><span class="p">,</span> <span class="n">foot_shape</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compute the support region for single support.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>foot_pose</code>
            </td>
            <td>
                  <code>(<span title="array">array</span> - <span title="like">like</span>, <span title="shape">shape</span>(2) or (3,))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>World pose proxy for the stance foot: uses [x, y].</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>foot_shape</code>
            </td>
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Foot contact shape in the foot frame (centered).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Translated foot polygon in world coordinates.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.get_active_polygon" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_active_polygon</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_active_polygon</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="n">steps_pose</span><span class="p">,</span> <span class="n">t_ss</span><span class="p">,</span> <span class="n">t_ds</span><span class="p">,</span> <span class="n">foot_shape</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Select the active support polygon at time <code>t</code>.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>t</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Elapsed time since start.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>steps_pose</code>
            </td>
            <td>
                  <code>(<span title="array">array</span> - <span title="like">like</span>, <span title="shape">shape</span>(<span title="K">K</span>, 2))</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Footstep sequence in world XY. Index 0 is the first stance (right or left).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>t_ss</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Single-support duration per step.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>t_ds</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Double-support duration between steps.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>foot_shape</code>
            </td>
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Foot contact shape in the foot frame (centered).</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="shapely.Polygon">Polygon</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Single- or double-support polygon active at time <code>t</code>.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


<details class="note" open>
  <summary>Notes</summary>
  <ul>
<li>Step period t_step = t_ss + t_ds.</li>
<li>For the last period, returns single support on the last foot.</li>
</ul>
</details>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="biped_walking_controller.foot.compute_swing_foot_pose" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">compute_swing_foot_pose</span>


</h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">compute_swing_foot_pose</span><span class="p">(</span><span class="n">t_state</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">step_start</span><span class="p">,</span> <span class="n">step_target</span><span class="p">,</span> <span class="n">touchdown_extension_vel</span><span class="p">,</span> <span class="n">path_generator</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Compute swing foot pose for current state time with late touchdown extension.</p>
<ul>
<li>For t_state in [0, t_ss]: nominal min-jerk swing between step_start and step_target.</li>
<li>For t_state &gt; t_ss and no contact: keep moving the <em>commanded</em> foot down
  below the nominal ground height at constant velocity.
  The physics/contact solver will clamp penetration.</li>
<li>As soon as contact_force &gt; force_threshold: freeze at step_target.</li>
</ul>


    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 Romain Desarzens
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": [], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>